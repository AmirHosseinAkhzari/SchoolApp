<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ูพูู ุขุณุชู</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css">
</head>
  <!-- ูพูุฌุฑู ุชุฃุฏ ุญุฐู -->
  <div class="popup-overlay" id="popup">
    <div class="popup-box">
      <h3>ุญุฐู ฺฉูุงุณ</h3>
      <p>
        ุขุง ูุทูุฆู ูุณุชุฏ ฺฉู ูโุฎูุงูุฏ ุงู ฺฉูุงุณ ุฑุง ุญุฐู ฺฉูุฏุ<br>
        ุจุง ุงูุฌุงู ุงู ฺฉุงุฑุ ุชูุงู ุฏุงุฏูโูุง ูุฑุชุจุท ุจุง ุงู ฺฉูุงุณ โ ุงุฒ ุฌููู ููุฑุณุช ุฏุงูุดโุขููุฒุงู ู ุณูุงุจู ุญุถูุฑ ู ุบุงุจ ุขูโูุง โ ุจุฑุง ููุดู ูพุงฺฉ ุฎูุงููุฏ ุดุฏ.
      </p>
      <div class="popup-buttons">
        <button id="cancelDelete">ุงูุตุฑุงู</button>
        <button id="confirmDelete">ุจููุ ุญุฐู ุดูุฏ</button>
      </div>
    </div>
  </div>


  <!-- โ ูพุงูพโุขูพ ุงูุฒูุฏู ฺฉูุงุณ -->
<div class="popup-overlay" id="addClassPopup">
  <div class="popup-box">
    <h3>ุงูุฒูุฏู ฺฉูุงุณ ุฌุฏุฏ</h3>
    <p style="font-size:13px; color:var(--text-muted);">ูุงู ฺฉูุงุณ ุฑุง ูุงุฑุฏ ฺฉูุฏ:</p>
    <input type="text" id="addClassInput" placeholder="ูุซูุงู ุฏูุงุฒุฏูู ุชุฌุฑุจ">
    <div class="popup-buttons" style="margin-top:30px;">
      <button type="button" id="cancelAddClass">ุงูุตุฑุงู</button>
      <button type="submit" id="confirmAddClass">ุงูุฒูุฏู</button>
    </div>
  </div>
</div>


  <!-- ๐งโ๐ ูพุงูพโุขูพ ูุฑุงุด ุฏุงูุดโุขููุฒ -->
  <div class="popup-overlay full" id="editStudentPopup">
    <div class="popup-box full-box">
      <header class="student-header centered">
        <div class="profile-container">
          <img id="studentPhotoPreview" src="https://i.pravatar.cc/150?u=default" class="profile-big">
          <button class="edit-photo-btn"><img src="icons/edit.svg" alt="edit"></button>
          <input type="file" id="studentPhoto" accept="image/*" style="display:none;">
        </div>
        <div class="student-header-text">
          <h2>ูุฑุงุด ุฏุงูุดโุขููุฒ</h2>
          <p>ุงุทูุงุนุงุช ุงู ุฏุงูุดโุขููุฒ ุฑุง ูุฑุงุด ฺฉูุฏ</p>
        </div>
      </header>

      <form id="editStudentForm" class="student-form-scroll">
        <div class="form-grid">
          <div class="form-row"><label>ูุงู</label><input type="text" id="studentFirstName"></div>
          <div class="form-row"><label>ูุงู ุฎุงููุงุฏฺฏ</label><input type="text" id="studentLastName"></div>
          <div class="form-row"><label>ุชุงุฑุฎ ุชููุฏ (ุดูุณ)</label><input type="text" id="studentBirth" placeholder="ฑดฐณ/ฐต/ฑฒ" maxlength="10"></div>
          <div class="form-row"><label>ฺฉุฏ ูู</label><input type="text" id="studentNid"></div>
          <div class="form-row"><label>ุดูุงุฑู ุฏุงูุดโุขููุฒ</label><input type="text" id="studentNumber"></div>
          <div class="form-row"><label>ุดูุงุฑู ูู</label><input type="text" id="studentParent"></div>
          <div class="form-row"><label>ุดูุงุฑู ููุฒู</label><input type="text" id="studentHome"></div>
          <div class="form-row"><label>ฺฉูุงุณ</label>
            <select id="studentClass">
              <option value="">ุงูุชุฎุงุจ ฺฉูุฏโฆ</option>
              <option>ููุชู</option>
              <option>ูุดุชู</option>
              <option>ููู</option>
              <option>ุฏูู ุฑุงุถ</option>
              <option>ุงุฒุฏูู ุชุฌุฑุจ</option>
            </select>
          </div>
        </div>
        <div class="popup-buttons" style="margin-top:30px;">
          <button type="button" id="cancelStudentEdit">ุงูุตุฑุงู</button>
          <button type="submit" id="confirmStudentEdit">ุฐุฎุฑู ุชุบุฑุงุช</button>
        </div>
      </form>
    </div>
  </div>


  <!-- ๐งพ ูพุงูพโุขูพ ุฌุฒุฆุงุช ุญุถูุฑ -->
<div class="popup-overlay" id="attendanceDetailPopup">
  <div class="popup-box">
    <h3>ุฌุฒุฆุงุช ุญุถูุฑ</h3>
    <div class="attendance-details">
      <p><strong>ูุงู:</strong> <span id="detailName">โ</span></p>
      <p><strong>ฺฉูุงุณ:</strong> <span id="detailClass">โ</span></p>
      <p><strong>ุชุงุฑุฎ:</strong> <span id="detailDate">โ</span></p>
      <p><strong>ุณุงุนุช ูุฑูุฏ:</strong> <span id="detailCheckIn">โ</span></p>
      <p><strong>ูุถุนุช:</strong> <span id="detailStatus" class="status-text">โ</span></p>
    </div>
    <div class="popup-buttons">
      <button id="closeAttendanceDetail">ุจุณุชู</button>
    </div>
  </div>
</div>


<!-- โ ูพุงูพโุขูพ ุชูุธูุงุช ุญุถูุฑ ู ุบุงุจ -->
<!-- โ ูพุงูพโุขูพ ุชูุธูุงุช ุญุถูุฑ ู ุบุงุจ -->
<div id="settingsPopup" class="popup-overlay">
  <div class="popup-box settings-popup">
    <h3>ุชูุธูุงุช ุญุถูุฑ ู ุบุงุจ</h3>
    <p class="desc">ูุฏุฑุช ุณุงุนุช ูพุงุงู ู ุฑูุฒูุง ุชุนุทู</p>

    <!-- ุฒูุงู ูพุงุงู -->
    <div class="form-row">
      <label for="attendanceEndTime">โฐ ุฒูุงู ูพุงุงู ุญุถูุฑ ู ุบุงุจ</label>
      <input type="text" id="attendanceEndTime" placeholder="ูุซูุงู 14:45" maxlength="5">
      <small>ูุฑูุช ฒด ุณุงุนุชู (HH:MM)</small>
    </div>

    <!-- ุฑูุฒูุง ุชุนุทู -->
    <div class="form-row">
      <label>๐ ุฑูุฒูุง ุชุนุทู</label>
      <div class="days-picker">
        <div class="day">ุด</div>
        <div class="day"></div>
        <div class="day">ุฏ</div>
        <div class="day">ุณ</div>
        <div class="day">ฺ</div>
        <div class="day">ูพ</div>
        <div class="day">ุฌ</div>
      </div>
    </div>

    <!-- ุฏฺฉููโูุง -->
    <div class="popup-buttons">
      <button id="cancelSettings">ุงูุตุฑุงู</button>
      <button id="saveSettings" class="confirm">ุฐุฎุฑู</button>
    </div>
  </div>
</div>





  <!-- โ ูพุงูพโุขูพ ุงูุฒูุฏู ุฏุงูุดโุขููุฒ -->
  <div class="popup-overlay full" id="addStudentPopup">
    <div class="popup-box full-box">
      <header class="student-header centered">
        <div class="profile-container">
          <img id="addStudentPhotoPreview" src="https://i.pravatar.cc/150?u=new" class="profile-big">
          <button class="edit-photo-btn" id="addPhotoBtn"><img src="icons/edit.svg"></button>
          <input type="file" id="addStudentPhoto" accept="image/*" style="display:none;">
        </div>
        <div class="student-header-text">
          <h2>ุงูุฒูุฏู ุฏุงูุดโุขููุฒ ุฌุฏุฏ</h2>
          <p>ุงุทูุงุนุงุช ุฏุงูุดโุขููุฒ ุฑุง ูุงุฑุฏ ฺฉูุฏ</p>
        </div>
      </header>

      <form id="addStudentForm" class="student-form-scroll">
        <div class="form-grid">
          <div class="form-row"><label>ูุงู</label><input type="text" id="addFirstName"></div>
          <div class="form-row"><label>ูุงู ุฎุงููุงุฏฺฏ</label><input type="text" id="addLastName"></div>
          <div class="form-row"><label>ุชุงุฑุฎ ุชููุฏ</label><input type="text" id="addBirth" placeholder="ฑดฐณ/ฐต/ฑฒ" maxlength="10"></div>
          <div class="form-row"><label>ฺฉุฏ ูู</label><input type="text" id="addNid"></div>
          <div class="form-row"><label>ุดูุงุฑู ุฏุงูุดโุขููุฒ</label><input type="text" id="addNumber"></div>
          <div class="form-row"><label>ุดูุงุฑู ูู</label><input type="text" id="addParent"></div>
          <div class="form-row"><label>ุดูุงุฑู ููุฒู</label><input type="text" id="addHome"></div>
          <div class="form-row"><label>ฺฉูุงุณ</label>
            <select id="addClass">
              <option value="">ุงูุชุฎุงุจ ฺฉูุฏโฆ</option>
              <option>ููุชู</option><option>ูุดุชู</option><option>ููู</option><option>ุฏูู ุฑุงุถ</option><option>ุงุฒุฏูู ุชุฌุฑุจ</option>
            </select>
          </div>
        </div>
        <div class="popup-buttons" style="margin-top:30px;">
          <button type="button" id="cancelAddStudent">ุงูุตุฑุงู</button>
          <button type="submit" id="confirmAddStudent">ุงูุฒูุฏู</button>
        </div>
      </form>
    </div>
  </div>

  <!-- โ๏ธ ูพุงูพโุขูพ ูุฑุงุด ฺฉูุงุณ -->
  <div class="popup-overlay" id="editPopup">
    <div class="popup-box">
      <h3>ูุฑุงุด ฺฉูุงุณ</h3>
      <p style="font-size:13px; color:var(--text-muted);">ูุงู ุฌุฏุฏ ฺฉูุงุณ ุฑุง ูุงุฑุฏ ฺฉูุฏ:</p>
      <input type="text" id="editInput" placeholder="ูุงู ุฌุฏุฏ ฺฉูุงุณ...">
      <div class="popup-buttons" style="margin-top:30px;">
        <button type="button" id="cancelEdit">ุงูุตุฑุงู</button>
        <button type="submit" id="confirmEdit">ุฐุฎุฑู</button>
      </div>
    </div>
  </div>




<!-- โ ูพุงูพโุขูพ ุงูุฒูุฏู ุฏุงูุดโุขููุฒ -->
<div class="popup-overlay full" id="addStudentPopup">
  <div class="popup-box full-box">
    
    <header class="student-header centered">
      <div class="profile-container">
        <img id="addStudentPhotoPreview" src="https://i.pravatar.cc/150?u=new" alt="profile" class="profile-big">
        <button class="edit-photo-btn" id="addPhotoBtn">
          <img src="icons/edit.svg" alt="edit">
        </button>
        <input type="file" id="addStudentPhoto" accept="image/*" style="display:none;">
      </div>

      <div class="student-header-text">
        <h2>ุงูุฒูุฏู ุฏุงูุดโุขููุฒ ุฌุฏุฏ</h2>
        <p>ุงุทูุงุนุงุช ุฏุงูุดโุขููุฒ ุฑุง ูุงุฑุฏ ฺฉูุฏ</p>
      </div>
    </header>

    <form id="addStudentForm" class="student-form-scroll">
      <div class="form-grid">
        <div class="form-row"><label>ูุงู</label><input type="text" id="addFirstName" placeholder="ูุซูุงู ุงูุฑุญุณู"></div>
        <div class="form-row"><label>ูุงู ุฎุงููุงุฏฺฏ</label><input type="text" id="addLastName" placeholder="ูุซูุงู ุงุฎุถุฑ"></div>
        <div class="form-row"><label>ุชุงุฑุฎ ุชููุฏ (ุดูุณ)</label><input type="text" id="addBirth" placeholder="ฑดฐณ/ฐต/ฑฒ" maxlength="10"></div>
        <div class="form-row"><label>ฺฉุฏ ูู</label><input type="text" id="addNid" placeholder="ฐฐตถทณฒนดฑ"></div>
        <div class="form-row"><label>ุดูุงุฑู ุฏุงูุดโุขููุฒ</label><input type="text" id="addNumber" placeholder="ฑฒณดตถ"></div>
        <div class="form-row"><label>ุดูุงุฑู ูู</label><input type="text" id="addParent" placeholder="ฐนฑฒณดตถทธน"></div>
        <div class="form-row"><label>ุดูุงุฑู ููุฒู</label><input type="text" id="addHome" placeholder="ฐทฑตฒณดตถทธ"></div>
        <div class="form-row"><label>ฺฉูุงุณ</label>
          <select id="addClass">
            <option value="">ุงูุชุฎุงุจ ฺฉูุฏโฆ</option>
            <option>ููุชู</option>
            <option>ูุดุชู</option>
            <option>ููู</option>
            <option>ุฏูู ุฑุงุถ</option>
            <option>ุงุฒุฏูู ุชุฌุฑุจ</option>
          </select>
        </div>
      </div>

      <div class="popup-buttons" style="margin-top:30px;">
        <button type="button" id="cancelAddStudent">ุงูุตุฑุงู</button>
        <button type="submit" id="confirmAddStudent">ุงูุฒูุฏู</button>
      </div>
    </form>
  </div>
</div>


<!-- ูพูุฌุฑู ูุฑุงุด ฺฉูุงุณ -->
<div class="popup-overlay" id="editPopup">
  <div class="popup-box">
    <h3>ูุฑุงุด ฺฉูุงุณ</h3>
    <p style="font-size:13px; color:var(--text-muted);">
      ูุงู ุฌุฏุฏ ฺฉูุงุณ ุฑุง ูุงุฑุฏ ฺฉูุฏ:
    </p>
    <input type="text" id="editInput" placeholder="ูุงู ุฌุฏุฏ ฺฉูุงุณ..." />
<div class="popup-buttons" style="margin-top:30px;">
  <button type="button" id="cancelAddStudent">ุงูุตุฑุงู</button>
  <button type="submit" id="confirmAddStudent">ุงูุฒูุฏู</button>
</div>

  </div>
</div>

<body>
  <!-- ุณุงุฏุจุงุฑ -->
  <aside class="sidebar">
    <div class="logo-box">
      <div class="logo"><img src="logo.png" alt=""></div>
      <div class="title-wrap">
        <span class="name">ุขุณุชู</span>
        <span class="sub">ูพูู ูุฏุฑุช</span>
      </div>
    </div>
    <div class="menu">
      <div class="item active" data-page="dashboard">ุฏุงุดุจูุฑุฏ</div>
      <div class="item" data-page="attendance">ุญุถูุฑ ู ุบุงุจ</div>
      <div class="item" data-page="students">ุฏุงูุดโุขููุฒูุง</div>
      <div class="item" data-page="classes">ฺฉูุงุณโูุง</div>
    </div>
  </aside>

  <!-- ุจุฎุด ุงุตู -->
  <div class="main">
    <!-- ุจุงูุง -->
    <header class="topbar">
      <div class="top-left">
        <span>ุณูุงูุ ุงูุฑุญุณู ๐</span>
      </div>
      <div style="display:flex; gap:10px; align-items:center;">
        <div class="profile">
          <div class="avatar"></div>
          <div class="name">Admin</div>
        </div>
      </div>
    </header>

    <!-- ูุญุชูุง -->
    <main class="content" id="content">
      <h2 style="margin:0 0 4px;">ุฏุงุดุจูุฑุฏ</h2>
      <p style="margin:0 0 12px; color:var(--text-muted); font-size:13px;">ููุง ฺฉู ุณุงูุงูู ุญุถูุฑ ู ุบุงุจ ุขุณุชู</p>

      <div class="cards">
        <div class="card">
          <div class="card-title">ุญุถูุฑ ุงูุฑูุฒ</div>
          <div class="card-value">โ</div>
        </div>
        <div class="card">
          <div class="card-title">ุบุจุชโูุง</div>
          <div class="card-value">โ</div>
        </div>
      </div>


    </main>
  </div>

  <script>
// ======================
// ๐ ุณูฺ ุจู ุตูุญุงุช
// ======================
const menuItems = document.querySelectorAll('.menu .item');
const content = document.getElementById('content');

menuItems.forEach(item => {
  item.addEventListener('click', () => {
    menuItems.forEach(i => i.classList.remove('active'));
    item.classList.add('active');
    renderPage(item.dataset.page);
  });
});

function renderPage(page) {
  if (page === 'dashboard') {
    content.innerHTML = `
      <h2 style="margin:0 0 4px;">ุฏุงุดุจูุฑุฏ</h2>
      <p style="margin:0 0 12px; color:var(--text-muted); font-size:13px;">ููุง ฺฉู ุณุงูุงูู ุญุถูุฑ ู ุบุงุจ ุขุณุชู</p>
      <div class="cards">
        <div class="card"><div class="card-title">ุญุถูุฑ ุงูุฑูุฒ</div><div class="card-value">โ</div></div>
        <div class="card"><div class="card-title">ุบุจุชโูุง</div><div class="card-value">โ</div></div>
      </div>
    `;
  }
  
  else if (page === 'classes') {
  const classesData = [
    { name: "ููุชู" }, { name: "ูุดุชู" }, { name: "ููู" }, { name: "ุฏูู ุฑุงุถ" }, { name: "ุงุฒุฏูู ุชุฌุฑุจ" }
  ];

  const rows = classesData.map((cls, i) => `
    <tr>
      <td>${i + 1}</td>
      <td>${cls.name}</td>
      <td class="actions">
        <button class="edit-btn"><img src="icons/edit.svg" alt="edit"></button>
        <button class="delete-btn"><img src="icons/delete.svg" alt="delete"></button>
      </td>
    </tr>
  `).join('');

  content.innerHTML = `
    <h2>ฺฉูุงุณโูุง</h2>
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
      <p style="color:var(--text-muted); font-size:13px;">ูุฏุฑุช ฺฉูุงุณโูุง</p>
      <button id="addClassBtn" class="add-btn">โ ุงูุฒูุฏู ฺฉูุงุณ</button>
    </div>
    <div class="table-wrap">
      <table class="class-table">
        <thead><tr><th>#</th><th>ูุงู ฺฉูุงุณ</th><th>ุนููุงุช</th></tr></thead>
        <tbody>${rows}</tbody>
      </table>
    </div>
  `;
}


else if (page === 'attendance') {
  const attendanceData = [
    { userId: '1', userFullName: 'ุงูุฑุญุณู ุงุฎุถุฑ', className: 'ูุดุชู ุงูู', status: 'ุญุงุถุฑ', profileLink: 'https://i.pravatar.cc/150?u=1' },
    { userId: '2', userFullName: 'ุนู ุฑุถุง', className: 'ููู', status: 'ุฏุฑ ุงููุฏู', profileLink: 'https://i.pravatar.cc/150?u=2' },
    { userId: '3', userFullName: 'ูุญูุฏ ุญุณู', className: 'ูุดุชู', status: 'ุบุงุจ', profileLink: 'https://i.pravatar.cc/150?u=3' }
  ];

  const getStatusColor = (status) => {
    switch (status) {
      case 'ุญุงุถุฑ': return '#2ecc71';
      case 'ุฏุฑ ุงููุฏู': return '#f39c12';
      case 'ุบุงุจ': return '#e74c3c';
      default: return 'var(--text)';
    }
  };

  const rows = attendanceData.map((item, i) => `
    <tr data-id="${item.userId}">
      <td>${i + 1}</td>
      <td><img src="${item.profileLink}" class="profile-pic"></td>
      <td>${item.userFullName}</td>
      <td>${item.className}</td>
      <td><span class="status-text" style="color:${getStatusColor(item.status)}">${item.status}</span></td>
      <td class="actions">
        <div class="status-switch">
          <div class="dot green ${item.status === 'ุญุงุถุฑ' ? 'active' : ''}" data-status="ุญุงุถุฑ"></div>
          <div class="dot orange ${item.status === 'ุฏุฑ ุงููุฏู' ? 'active' : ''}" data-status="ุฏุฑ ุงููุฏู"></div>
          <div class="dot red ${item.status === 'ุบุงุจ' ? 'active' : ''}" data-status="ุบุงุจ"></div>
        </div>
      </td>
    </tr>
  `).join('');
content.innerHTML = `
  <h2>ุญุถูุฑ ู ุบุงุจ</h2>
  <div class="filter-bar">
  <button id="settingsBtn" class="settings-btn">ุชูุธูุงุช</button>
    <div class="filter-item">
      <label>ฺฉูุงุณ:</label>
      <select id="filterClass">
        <option value="">ููู</option>
        <option>ููุชู</option>
        <option>ูุดุชู</option>
        <option>ููู</option>
        <option>ุฏูู ุฑุงุถ</option>
        <option>ุงุฒุฏูู ุชุฌุฑุจ</option>
      </select>
    </div>

    <div class="filter-item">
      <label>ูุถุนุช:</label>
      <select id="filterStatus">
        <option value="">ููู</option>
        <option value="ุญุงุถุฑ">ุญุงุถุฑ</option>
        <option value="ุฏุฑ ุงููุฏู">ุฏุฑ ุงููุฏู</option>
        <option value="ุบุงุจ">ุบุงุจ</option>
      </select>
    </div>

    <div class="filter-item search">
      <input type="text" id="searchName" placeholder="ุฌุณุชุฌู ุจุฑ ุงุณุงุณ ูุงู...">
    </div>
  </div>

  <div class="table-wrap">
    <table class="class-table students-table align-fix">
      <thead>
        <tr>
          <th>#</th><th>ุนฺฉุณ</th><th>ูุงู ฺฉุงูู</th><th>ฺฉูุงุณ</th><th>ูุถุนุช</th><th>ุนููุงุช</th>
        </tr>
      </thead>
      <tbody id="attendanceBody">${rows}</tbody>
    </table>
  </div>
`;

}



  else if (page === 'students') {
    const studentsData = [
      { firstName: "ุงูุฑุญุณู", lastName: "ุงุฎุถุฑ", className: "ูุดุชู", profileLink: "https://i.pravatar.cc/150?u=1", id: "stu1" },
      { firstName: "ุนู", lastName: "ุฑุถุง", className: "ูุดุชู", profileLink: "https://i.pravatar.cc/150?u=2", id: "stu2" },
      { firstName: "ูุญูุฏ", lastName: "ุญุณู", className: "ููู", profileLink: "https://i.pravatar.cc/150?u=3", id: "stu3" }
    ];

    let rows = studentsData.map((stu, i) => `
      <tr>
        <td>${i + 1}</td>
        <td><img src="${stu.profileLink}" class="profile-pic"></td>
        <td>${stu.className}</td>
        <td>${stu.firstName}</td>
        <td>${stu.lastName}</td>
        <td class="actions">
          <button class="edit-btn" data-id="${stu.id}"><img src="icons/edit.svg" alt="edit"></button>
          <button class="delete-btn"><img src="icons/delete.svg" alt="delete"></button>
        </td>
      </tr>
    `).join('');

content.innerHTML = `
  <h2 style="margin:0;">ุฏุงูุดโุขููุฒุงู</h2>
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
    <p style="color:var(--text-muted); font-size:13px;">ูุฏุฑุช ุงุทูุงุนุงุช ุฏุงูุดโุขููุฒุงู</p>
    <div style="display:flex; align-items:center; gap:10px;">
      <select id="classFilter" style="padding:6px 10px; border-radius:8px; border:1px solid var(--border); background:var(--bg-soft); color:var(--text); font-family:inherit;">
        <option value="all">ููู ฺฉูุงุณโูุง</option>
        <option>ููุชู</option>
        <option>ูุดุชู</option>
        <option>ููู</option>
        <option>ุฏูู ุฑุงุถ</option>
        <option>ุงุฒุฏูู ุชุฌุฑุจ</option>
      </select>
      <button id="addStudentBtn" class="add-btn">โ ุงูุฒูุฏู ุฏุงูุดโุขููุฒ</button>
    </div>
  </div>
  <div class="table-wrap">
    <table class="class-table students-table align-fix">
      <thead>
        <tr><th>#</th><th>ุนฺฉุณ</th><th>ฺฉูุงุณ</th><th>ูุงู</th><th>ูุงู ุฎุงููุงุฏฺฏ</th><th>ุนููุงุช</th></tr>
      </thead>
      <tbody>${rows}</tbody>
    </table>
  </div>
`;

  }

  else if (page === 'classes') {
    const classesData = [
      { name: "ููุชู" }, { name: "ูุดุชู" }, { name: "ููู" }, { name: "ุฏูู ุฑุงุถ" }, { name: "ุงุฒุฏูู ุชุฌุฑุจ" }
    ];

    const rows = classesData.map((cls, i) => `
      <tr>
        <td>${i + 1}</td>
        <td>${cls.name}</td>
        <td class="actions">
          <button class="edit-btn"><img src="icons/edit.svg" alt="edit"></button>
          <button class="delete-btn"><img src="icons/delete.svg" alt="delete"></button>
        </td>
      </tr>
    `).join('');

    content.innerHTML = `
      <h2>ฺฉูุงุณโูุง</h2>
      <p style="color:var(--text-muted); font-size:13px;">ูุฏุฑุช ฺฉูุงุณโูุง</p>
      <div class="table-wrap">
        <table class="class-table">
          <thead><tr><th>#</th><th>ูุงู ฺฉูุงุณ</th><th>ุนููุงุช</th></tr></thead>
          <tbody>${rows}</tbody>
        </table>
      </div>
    `;
  }

  else if (page === 'settings') {
    content.innerHTML = `
      <h2>ุชูุธูุงุช</h2>
      <p style="color:var(--text-muted); font-size:13px;">ุชูุธูุงุช ูพุงู ูพูู ุขุณุชู</p>
      <div class="placeholder">API key / ุขุฏุฑุณ ุณุฑูุฑ / ุชู</div>
    `;
  }
}


// ======================
// ๐ ูพูุฌุฑู ุญุฐู ุนููู
// ======================
let currentRow = null;

document.addEventListener('click', (e) => {
  const del = e.target.closest('.delete-btn');
  if (!del) return;

  currentRow = del.closest('tr');
  const page = document.querySelector('.menu .item.active').dataset.page;
  const popup = document.getElementById('popup');
  const title = popup.querySelector('h3');
  const text = popup.querySelector('p');

  if (page === 'students') {
    title.textContent = 'ุญุฐู ุฏุงูุดโุขููุฒ';
    text.innerHTML = 'ุจุง ุญุฐู ุงู ุฏุงูุดโุขููุฒุ ุชูุงู ุฏุงุฏูโูุง ุงู (ุญุถูุฑ ู ุบุงุจุ ุดูุงุฑู ฺฉุงุฑุช ู ...) ุจุฑุง ููุดู ูพุงฺฉ ูโุดูุฏ.';
  } else if (page === 'classes') {
    title.textContent = 'ุญุฐู ฺฉูุงุณ';
    text.innerHTML = 'ุจุง ุญุฐู ุงู ฺฉูุงุณุ ุชูุงู ุฏุงูุดโุขููุฒุงู ู ุณูุงุจู ูุฑุชุจุท ุขู ุจุฑุง ููุดู ูพุงฺฉ ูโุดููุฏ.';
  }

  popup.classList.add('active');
});

document.getElementById('cancelDelete').addEventListener('click', () => {
  document.getElementById('popup').classList.remove('active');
  currentRow = null;
});

document.getElementById('confirmDelete').addEventListener('click', () => {
  if (currentRow) currentRow.remove();
  document.getElementById('popup').classList.remove('active');
});


// ======================
// โ๏ธ ูุฑุงุด ฺฉูุงุณ / ุฏุงูุดโุขููุฒ
// ======================
let currentEditRow = null;
let currentStudentRow = null;

document.addEventListener('click', (e) => {
  const editBtn = e.target.closest('.edit-btn');
  if (!editBtn) return;

  const activePage = document.querySelector('.menu .item.active').dataset.page;

  if (activePage === 'classes') {
    currentEditRow = editBtn.closest('tr');
    const currentName = currentEditRow.children[1].innerText;
    document.getElementById('editInput').value = currentName;
    document.getElementById('editPopup').classList.add('active');
  } else if (activePage === 'students') {
    currentStudentRow = editBtn.closest('tr');
    document.getElementById('editStudentPopup').classList.add('active');

    document.getElementById('studentPhotoPreview').src = currentStudentRow.children[1].querySelector('img').src;
    document.getElementById('studentFirstName').value = currentStudentRow.children[3].innerText;
    document.getElementById('studentLastName').value = currentStudentRow.children[4].innerText;
    document.getElementById('studentClass').value = currentStudentRow.children[2].innerText;
  }
});

// ุจุณุชู popup ฺฉูุงุณ
document.getElementById('cancelEdit').addEventListener('click', () => {
  document.getElementById('editPopup').classList.remove('active');
  currentEditRow = null;
});

// ุฐุฎุฑู popup ฺฉูุงุณ
document.getElementById('confirmEdit').addEventListener('click', () => {
  const newName = document.getElementById('editInput').value.trim();
  if (newName && currentEditRow) currentEditRow.children[1].innerText = newName;
  document.getElementById('editPopup').classList.remove('active');
});

// ุจุณุชู popup ุฏุงูุดโุขููุฒ
document.getElementById('cancelStudentEdit').addEventListener('click', () => {
  document.getElementById('editStudentPopup').classList.remove('active');
  currentStudentRow = null;
});

// ุงูุชุฎุงุจ ุนฺฉุณ ุฌุฏุฏ ุฏุฑ ูุฑุงุด
document.querySelector('.edit-photo-btn').addEventListener('click', () => {
  document.getElementById('studentPhoto').click();
});
document.getElementById('studentPhoto').addEventListener('change', (e) => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = ev => document.getElementById('studentPhotoPreview').src = ev.target.result;
    reader.readAsDataURL(file);
  }
});

// ฺฉูุชุฑู ูุฑูุช ุชุงุฑุฎ ุฏุฑ ูุฑุงุด
document.getElementById('studentBirth').addEventListener('input', (e) => {
  const val = e.target.value.trim();
  const regex = /^[0-9ฐ-น]{4}\/[0-9ฐ-น]{2}\/[0-9ฐ-น]{2}ุด$/;
  e.target.style.borderColor = val && !regex.test(val) ? '#e53935' : '';
});

// ุฐุฎุฑู ุชุบุฑุงุช ูุฑุงุด ุฏุงูุดโุขููุฒ
document.getElementById('editStudentForm').addEventListener('submit', (e) => {
  e.preventDefault();

  if (!currentStudentRow) return;

  // ฺฏุฑูุชู ุฏุงุฏูโูุง ุฌุฏุฏ ุงุฒ ูุฑู
  const newPhoto = document.getElementById('studentPhotoPreview').src;
  const newFirst = document.getElementById('studentFirstName').value.trim();
  const newLast  = document.getElementById('studentLastName').value.trim();
  const newClass = document.getElementById('studentClass').value.trim();

  // ุงุนูุงู ุฑู ุฌุฏูู
  currentStudentRow.children[1].querySelector('img').src = newPhoto;
  currentStudentRow.children[2].innerText = newClass || 'โ';
  currentStudentRow.children[3].innerText = newFirst || 'โ';
  currentStudentRow.children[4].innerText = newLast || 'โ';

  // ุจุณุชู popup
  document.getElementById('editStudentPopup').classList.remove('active');
  currentStudentRow = null;
});



// ======================
// โ ุงูุฒูุฏู ุฏุงูุดโุขููุฒ
// ======================
document.addEventListener('click', (e) => {
  if (e.target.id === 'addStudentBtn') {
    document.body.style.overflow = 'hidden'; // ุฌููฺฏุฑ ุงุฒ ุงุณฺฉุฑูู ูพุณโุฒููู
    document.getElementById('addStudentPopup').classList.add('active');
  }
});

document.getElementById('cancelAddStudent').addEventListener('click', () => {
  document.getElementById('addStudentPopup').classList.remove('active');
  document.body.style.overflow = ''; // ุจุงุฒฺฏุฑุฏุงูุฏู ุงุณฺฉุฑูู
});

// ุงูุชุฎุงุจ ุนฺฉุณ ุฌุฏุฏ ุจุฑุง ุงูุฒูุฏู
document.getElementById('addPhotoBtn').addEventListener('click', () => {
  document.getElementById('addStudentPhoto').click();
});

document.getElementById('addStudentPhoto').addEventListener('change', (e) => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = (ev) => {
      document.getElementById('addStudentPhotoPreview').src = ev.target.result;
    };
    reader.readAsDataURL(file);
  }
});

// ฺฉูุชุฑู ูุฑูุช ุชุงุฑุฎ ุฏุฑ ูุฑุงุด ุฏุงูุดโุขููุฒ
document.getElementById('studentBirth').addEventListener('input', (e) => {
  const val = e.target.value.trim();
  const regex = /^[0-9ฐ-น]{4}\/[0-9ฐ-น]{2}\/[0-9ฐ-น]{2}$/;
  e.target.style.borderColor = val && !regex.test(val) ? '#e53935' : '';
});

// ฺฉูุชุฑู ูุฑูุช ุชุงุฑุฎ ุฏุฑ ุงูุฒูุฏู ุฏุงูุดโุขููุฒ
document.getElementById('addBirth').addEventListener('input', (e) => {
  const val = e.target.value.trim();
  const regex = /^[0-9ฐ-น]{4}\/[0-9ฐ-น]{2}\/[0-9ฐ-น]{2}$/;
  e.target.style.borderColor = val && !regex.test(val) ? '#e53935' : '';
});


// ุซุจุช ูุฑู ุงูุฒูุฏู ุฏุงูุดโุขููุฒ
document.getElementById('addStudentForm').addEventListener('submit', (e) => {
  e.preventDefault();

  const f = document.getElementById('addFirstName').value.trim();
  const l = document.getElementById('addLastName').value.trim();
  const c = document.getElementById('addClass').value;
  const p = document.getElementById('addStudentPhotoPreview').src;

  if (!f || !l) return;

  const tableBody = document.querySelector('.students-table tbody');
  const newRow = document.createElement('tr');
  const rowCount = tableBody.children.length + 1;

  newRow.innerHTML = `
    <td>${rowCount}</td>
    <td><img src="${p}" class="profile-pic"></td>
    <td>${c}</td>
    <td>${f}</td>
    <td>${l}</td>
    <td class="actions">
      <button class="edit-btn"><img src="icons/edit.svg" alt="edit"></button>
      <button class="delete-btn"><img src="icons/delete.svg" alt="delete"></button>
    </td>
  `;

  tableBody.appendChild(newRow);
  document.getElementById('addStudentPopup').classList.remove('active');
  document.body.style.overflow = '';
});


// ======================
// โ ุงูุฒูุฏู ฺฉูุงุณ ุฌุฏุฏ
// ======================
document.addEventListener('click', (e) => {
  if (e.target.id === 'addClassBtn') {
    document.getElementById('addClassPopup').classList.add('active');
  }
});
 
document.getElementById('cancelAddClass').addEventListener('click', () => {
  document.getElementById('addClassPopup').classList.remove('active');
});

document.getElementById('confirmAddClass').addEventListener('click', () => {
  const input = document.getElementById('addClassInput');
  const className = input.value.trim();
  if (!className) return;

  const tableBody = document.querySelector('.class-table tbody');
  const newRow = document.createElement('tr');
  const rowCount = tableBody.children.length + 1;

  newRow.innerHTML = `
    <td>${rowCount}</td>
    <td>${className}</td>
    <td class="actions">
      <button class="edit-btn"><img src="icons/edit.svg" alt="edit"></button>
      <button class="delete-btn"><img src="icons/delete.svg" alt="delete"></button>
    </td>
  `;

  tableBody.appendChild(newRow);
  input.value = '';
  document.getElementById('addClassPopup').classList.remove('active');
});

// ๐ฏ ููุชุฑ ฺฉูุงุณโูุง ุฏุฑ ุตูุญู ุฏุงูุดโุขููุฒุงู
document.addEventListener('change', (e) => {
  if (e.target.id === 'classFilter') {
    const selected = e.target.value;
    const rows = document.querySelectorAll('.students-table tbody tr');
    rows.forEach(row => {
      const className = row.children[2].innerText.trim();
      if (selected === 'all' || className === selected) {
        row.style.display = '';
      } else {
        row.style.display = 'none';
      }
    });
  }
});



// ๐จ ุชุบุฑ ูุถุนุช ุจุง ฺฉูฺฉ ุฑู ุฏุงุฑูโูุง
// ๐ฏ ฺฉูุชุฑู ุชุบุฑ ูุถุนุช ุญุถูุฑ ุจุง ฺฉูฺฉ ุฑู ุฏุงุฑูโูุง
document.addEventListener('click', (e) => {
  const dot = e.target.closest('.dot');
  if (!dot) return;

  // ุฑุฏู ูุนู ุฌุฏูู
  const row = dot.closest('tr');
  const dots = row.querySelectorAll('.dot');
  const text = row.querySelector('.status-text');

  // ุญุฐู active ุงุฒ ุชูุงู ุฏุงุฑูโูุง
  dots.forEach(d => d.classList.remove('active'));

  // ูุนุงู ฺฉุฑุฏู ุฏุงุฑู ูุนู
  dot.classList.add('active');

  // ุชุนู ูุถุนุช ุฌุฏุฏ
  const newStatus = dot.dataset.status;

  // ุชุนู ุฑูฺฏ ูุชู ุจุฑ ุงุณุงุณ ุฏุงุฑู ุงูุชุฎุงุจโุดุฏู
  let color = '';
  if (dot.classList.contains('green')) color = '#2ecc71';       // ุญุงุถุฑ
  else if (dot.classList.contains('orange')) color = '#f39c12'; // ุฏุฑ ุงููุฏู
  else if (dot.classList.contains('red')) color = '#e74c3c';    // ุบุงุจ

  // ุจุฑูุฒุฑุณุงู ูุชู ู ุฑูฺฏ
  text.textContent = newStatus;
  text.style.color = color;
});


// ๐ฏ ุจุงุฒ ฺฉุฑุฏู ูพุงูพโุขูพ ุฌุฒุฆุงุช ุจุง ฺฉูฺฉ ุฑู ุฑุฏู ุฌุฏูู
document.addEventListener('click', (e) => {
  const row = e.target.closest('tr');
  const page = document.querySelector('.menu .item.active').dataset.page;
  if (!row || page !== 'attendance') return;

  // ุงุณุชุฎุฑุงุฌ ุฏุงุฏูโูุง ุงุฒ ุฌุฏูู
  const name = row.children[2].innerText;
  const className = row.children[3].innerText;
  const status = row.querySelector('.status-text').innerText;

  // ุจุฑุง ุณุงุฏฺฏุ ุฏุงุฏู ูุฑุถ ุณุงุนุช ู ุชุงุฑุฎ
  const detailData = {
    userFullName: name,
    className: className,
    checkIn: "00:16",
    status: status,
    date: "1404/08/19"
  };

  // ุชูุธู ุฑูฺฏ ูุถุนุช
  const statusSpan = document.getElementById('detailStatus');
  statusSpan.textContent = detailData.status;
  if (status.includes("ุญุงุถุฑ") || status.includes("ุฒูุฏ ุงููุฏู"))
    statusSpan.style.color = "#2ecc71";
  else if (status.includes("ุฏุฑ"))
    statusSpan.style.color = "#f39c12";
  else
    statusSpan.style.color = "#e74c3c";

  // ุฏุฑุฌ ุฏุฑ ูพุงูพโุขูพ
  document.getElementById('detailName').textContent = detailData.userFullName;
  document.getElementById('detailClass').textContent = detailData.className;
  document.getElementById('detailCheckIn').textContent = detailData.checkIn;
  document.getElementById('detailDate').textContent = detailData.date;

  // ููุงุด ูพุงูพโุขูพ
  document.getElementById('attendanceDetailPopup').classList.add('active');
});

// ๐ฏ ุจุณุชู ูพุงูพโุขูพ
document.getElementById('closeAttendanceDetail').addEventListener('click', () => {
  document.getElementById('attendanceDetailPopup').classList.remove('active');
});


// ๐ฏ ููุชุฑ ู ุฌุณุชุฌู ุฏุฑ ุฌุฏูู ุญุถูุฑ
function filterAttendance() {
  const cls = document.getElementById('filterClass').value;
  const status = document.getElementById('filterStatus').value;
  const search = document.getElementById('searchName').value.trim();

  const tbody = document.getElementById('attendanceBody');
  const rows = tbody.querySelectorAll('tr');

  rows.forEach(row => {
    const name = row.children[2].innerText;
    const className = row.children[3].innerText;
    const stat = row.querySelector('.status-text').innerText;

    const matchClass = !cls || className.includes(cls);
    const matchStatus = !status || stat === status;
    const matchSearch = !search || name.includes(search);

    row.style.display = (matchClass && matchStatus && matchSearch) ? '' : 'none';
  });
}

// ุงุนูุงู ููุชุฑ ููฺฏุงู ุชุบุฑ
document.addEventListener('input', (e) => {
  if (['filterClass', 'filterStatus', 'searchName'].includes(e.target.id)) {
    filterAttendance();
  }
});

// โ ฺฉูุชุฑู ูพุงูพโุขูพ ุชูุธูุงุช
const settingsPopup = document.getElementById('settingsPopup');
const settingsBtn = document.getElementById('settingsBtn');
const cancelSettings = document.getElementById('cancelSettings');
const saveSettings = document.getElementById('saveSettings');
const endTimeInput = document.getElementById('attendanceEndTime');
const dayButtons = document.querySelectorAll('.day');

// ุจุงุฒ ฺฉุฑุฏู ูพุงูพโุขูพ
document.addEventListener("click", (e) => {
  const btn = e.target.closest("#settingsBtn");
  if (!btn) return;

  console.log("ุฏฺฉูู ุชูุธูุงุช ฺฉูฺฉ ุดุฏ โ");
  document.getElementById("settingsPopup").classList.add("active");
});


// ุจุณุชู ุจุง ุงูุตุฑุงู
cancelSettings?.addEventListener('click', () => {
  settingsPopup.classList.remove('active');
});

// ุฐุฎุฑู ู ุจุณุชู
saveSettings?.addEventListener('click', () => {
  settingsPopup.classList.remove('active');
});

// ุงูุชุฎุงุจ ุฑูุฒูุง ุชุนุทู
dayButtons.forEach(day => {
  day.addEventListener('click', () => day.classList.toggle('active'));
});

// ุจุฑุฑุณ ูุฑูุช ุณุงุนุช ฒด ุณุงุนุชู
endTimeInput?.addEventListener('input', (e) => {
  const val = e.target.value.trim();
  const regex = /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/;
  if (val && !regex.test(val)) {
    e.target.style.borderColor = '#e53935';
    e.target.style.boxShadow = '0 0 0 3px rgba(229,57,53,0.2)';
  } else {
    e.target.style.borderColor = 'var(--border)';
    e.target.style.boxShadow = 'none';
  }
});

  </script>
</body>
</html>
